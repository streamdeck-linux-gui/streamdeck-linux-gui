{
    "app-id": "com.timothycrosley.streamdeck-ui",
    "runtime": "org.freedesktop.Platform",
    "runtime-version": "23.08",
    "sdk": "org.freedesktop.Sdk",
    "command": "streamdeck",
    "finish-args": [
        "--share=ipc",
        "--socket=fallback-x11",
        "--socket=pulseaudio",
        "--env=PULSE_PROP_media.category=Manager",
        "--device=all",
        "--talk-name=org.mpris.MediaPlayer2.*",
        "--filesystem=home"
    ],
    "cleanup": [
        "/include",
        "/lib/pkgconfig",
        "/man",
        "/share/doc",
        "/share/man",
        "*.la", 
        "*.a"
    ],
    "modules": [
        {
            "name": "cpython",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://www.python.org/ftp/python/3.11.7/Python-3.11.7.tar.xz",
                    "sha256": "18e1aa7e66ff3a58423d59ed22815a6954e53342122c45df20c96877c062b9b7"
                }
            ]
        },
        {
            "name": "zlib",
            "buildsystem": "autotools",
            "sources": [
                { 
                    "type": "archive",
                    "url": "https://github.com/madler/zlib/releases/download/v1.3/zlib-1.3.tar.xz",
                    "sha256": "8a9ba2898e1d0d774eca6ba5b4627a11e5588ba85c8851336eb38de4683050a7"
                }
            ]
        },
        {
            "name": "libjpg",
            "buildsystem": "cmake",
            "sources": [
                { 
                    "type": "archive",
                    "url": "https://github.com/libjpeg-turbo/libjpeg-turbo/releases/download/3.0.1/libjpeg-turbo-3.0.1.tar.gz",
                    "sha256": "22429507714ae147b3acacd299e82099fce5d9f456882fc28e252e4579ba2a75"
                }
            ]
        },
        {
            "name": "libusb",
            "buildsystem": "autotools",
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/libusb/libusb.git"
                }
            ]
        },
        {
            "name": "hidapi-libusb",
            "buildsystem": "autotools",
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/libusb/hidapi.git"
                }
            ]
        },
        {
            "name": "eudev",
            "buildsystem": "autotools",
            "sources": [
                { 
                    "type": "archive",
                    "url": "https://github.com/eudev-project/eudev/releases/download/v3.2.14/eudev-3.2.14.tar.gz",
                    "sha256": "8da4319102f24abbf7fff5ce9c416af848df163b29590e666d334cc1927f006f"
                }
            ]
        },
        {
            "name": "mpris",
            "buildsystem": "simple",
            "build-commands": [
                "make release",
                "install -D mpris-ctl /app/bin/mpris-ctl"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/mariusor/mpris-ctl.git"
                }
            ]
        },
        {
            "name": "amixer",
            "buildsystem": "autotools", 
            "sources": [
                {
                    "type": "archive",
                    "url": "https://www.alsa-project.org/files/pub/utils/alsa-utils-1.2.9.tar.bz2",
                    "sha256": "e7623d4525595f92e11ce25ee9a97f2040a14c6e4dcd027aa96e06cbce7817bd"
                }
            ]
        },
        {
            "name": "pip-install",
            "buildsystem": "simple",
            "build-options": {
                "build-args": [
                    "--share=network"
                ]
            },
            "build-commands": [
                "pip3 install streamdeck-linux-gui"
            ]
        }
    ]
}
